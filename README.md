# Remove Extra Blank Lines - Burp Suite æ’ä»¶

## æ’ä»¶æè¿°

è¿™æ˜¯ä¸€ä¸ªç”¨äº Burp Suite çš„æ’ä»¶ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å»é™¤ HTTP è¯·æ±‚å’Œå“åº”æŠ¥æ–‡å¤´éƒ¨ä¸æ­£æ–‡ä¹‹é—´çš„å¤šä½™ç©ºè¡Œã€‚è¯¥æ’ä»¶ä½¿ç”¨ Montoya API å¼€å‘ï¼Œéµå¾ª HTTP åè®®æ ‡å‡†ï¼Œç¡®ä¿å¤´éƒ¨å’Œæ­£æ–‡ä¹‹é—´åªä¿ç•™ä¸€ä¸ªè§„èŒƒçš„ç©ºè¡Œã€‚

## åŠŸèƒ½ç‰¹æ€§

- **æ™ºèƒ½äºŒè¿›åˆ¶æ£€æµ‹**ï¼šè‡ªåŠ¨è¯†åˆ«äºŒè¿›åˆ¶å†…å®¹ï¼ˆå›¾ç‰‡ã€PDFã€ZIP ç­‰ï¼‰ï¼Œé¿å…ç ´åäºŒè¿›åˆ¶æ•°æ®
- **è‡ªåŠ¨æ¸…ç†å¤šä½™ç©ºè¡Œ**ï¼šæ™ºèƒ½æ£€æµ‹å¹¶åˆ é™¤ HTTP æ¶ˆæ¯å¤´éƒ¨å’Œæ­£æ–‡ä¹‹é—´çš„å¤šä½™ç©ºè¡Œ
- **æ”¯æŒæ··åˆå†…å®¹**ï¼šå®‰å…¨å¤„ç†åŒ…å«æ–‡æœ¬å’ŒäºŒè¿›åˆ¶æ•°æ®æ··åˆçš„ HTTP æ¶ˆæ¯
- **å¤šç§å­—ç¬¦ç¼–ç æ”¯æŒ**ï¼šæ­£ç¡®å¤„ç† UTF-8ã€ASCII ç­‰å¤šç§å­—ç¬¦ç¼–ç 
- **æ™ºèƒ½æ¢è¡Œç¬¦å¤„ç†**ï¼šæ”¯æŒ Windows é£æ ¼ï¼ˆ\r\nï¼‰å’Œ Unix é£æ ¼ï¼ˆ\nï¼‰çš„æ¢è¡Œç¬¦
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šé‡‡ç”¨æ¸…æ™°çš„æ¨¡å—åŒ–æ¶æ„ï¼Œä¾¿äºç»´æŠ¤å’Œæ‰©å±•
- **é«˜æ€§èƒ½å¤„ç†**ï¼šé‡‡ç”¨é‡‡æ ·æ£€æµ‹æœºåˆ¶ï¼Œé¿å…å¤„ç†å¤§å‹äºŒè¿›åˆ¶æ–‡ä»¶å½±å“æ€§èƒ½
- **å®‰å…¨çš„é”™è¯¯å¤„ç†**ï¼šå‡ºç°é”™è¯¯æ—¶ä¼šè¿”å›åŸå§‹æ¶ˆæ¯ï¼Œç¡®ä¿ä¸ä¼šç ´åæ­£å¸¸çš„ HTTP é€šä¿¡
- **è¯¦ç»†çš„æ—¥å¿—è®°å½•**ï¼šåœ¨ Burp Suite çš„è¾“å‡ºé¢æ¿ä¸­æä¾›è¯¦ç»†çš„å¤„ç†æ—¥å¿—

## æ¶æ„è®¾è®¡

### ç³»ç»Ÿæ¶æ„å›¾

```mermaid
graph TD
    A["HTTP è¯·æ±‚/å“åº”"] --> B["HttpMessageHandler"]
    B --> C{"ContentAnalyzer<br/>å†…å®¹åˆ†æ"}
    C -->|"æ–‡æœ¬å†…å®¹"| D["MessageProcessor<br/>å¤„ç†å™¨"]
    C -->|"äºŒè¿›åˆ¶å†…å®¹"| E["è·³è¿‡å¤„ç†<br/>è¿”å›åŸå§‹æ¶ˆæ¯"]
    D --> F["HttpMessageCleaner<br/>æ¸…ç†å™¨"]
    F --> G["å¤„ç†åçš„æ¶ˆæ¯"]
    
    C1["æ£€æµ‹äºŒè¿›åˆ¶æ–‡ä»¶é­”æ•°<br/>JPEG, PNG, PDF, ZIPç­‰"]
    C2["è®¡ç®—ä¸å¯æ‰“å°å­—ç¬¦æ¯”ä¾‹<br/>è¶…è¿‡30%è§†ä¸ºäºŒè¿›åˆ¶"]
    C3["æ£€æµ‹NULLå­—èŠ‚"]
    C1 --> C
    C2 --> C
    C3 --> C
    
    F1["ç§»é™¤å¤šä½™ç©ºè¡Œ"]
    F2["ä¿æŒHTTPåè®®æ ¼å¼"]
    F3["å¤„ç†ä¸åŒæ¢è¡Œç¬¦"]
    F1 --> F
    F2 --> F
    F3 --> F
    
    style A fill:#e1f5fe
    style G fill:#c8e6c9
    style E fill:#ffecb3
    style C fill:#f3e5f5
    style D fill:#e8f5e8
    style F fill:#fff3e0
```

### æ¨¡å—èŒè´£

| æ¨¡å— | èŒè´£ | ä¸»è¦åŠŸèƒ½ |
|------|------|----------|
| **RemoveExtraBlankLinesExtension** | æ’ä»¶å…¥å£ | åˆå§‹åŒ–æ’ä»¶ï¼Œæ³¨å†Œå¤„ç†å™¨ |
| **HttpMessageHandler** | HTTPæ¶ˆæ¯æ‹¦æˆª | æ‹¦æˆªHTTPè¯·æ±‚/å“åº”ï¼Œå†³å®šæ˜¯å¦å¤„ç† |
| **ContentAnalyzer** | å†…å®¹åˆ†æ | æ£€æµ‹äºŒè¿›åˆ¶å†…å®¹ï¼Œåˆ†æå­—ç¬¦ç¼–ç  |
| **MessageProcessor** | å¤„ç†åè°ƒ | åè°ƒå¤„ç†æµç¨‹ï¼Œåˆ†ç¦»å¤´éƒ¨å’Œæ­£æ–‡ |
| **HttpMessageCleaner** | æ¶ˆæ¯æ¸…ç† | æ‰§è¡Œå®é™…çš„ç©ºè¡Œæ¸…ç†æ“ä½œ |

## æŠ€æœ¯å®ç°

- **å¼€å‘è¯­è¨€**ï¼šJava 17
- **API ç‰ˆæœ¬**ï¼šBurp Suite Montoya API 2023.12.1
- **æ„å»ºå·¥å…·**ï¼šMaven 3.x
- **åŒ…å**ï¼šoxff.org.RemoveExtraBlankLinesExtension
- **è®¾è®¡æ¨¡å¼**ï¼šè´£ä»»é“¾æ¨¡å¼ã€ç­–ç•¥æ¨¡å¼

## å®‰è£…è¯´æ˜

1. ä¸‹è½½ç¼–è¯‘å¥½çš„ JAR æ–‡ä»¶ï¼š`target/RemoveExtraBlankLines-1.0-SNAPSHOT.jar`
2. æ‰“å¼€ Burp Suite
3. è½¬åˆ° "Extensions" -> "Installed"
4. ç‚¹å‡» "Add" æŒ‰é’®
5. é€‰æ‹© "Extension type" ä¸º "Java"
6. åœ¨ "Extension file" ä¸­é€‰æ‹©ä¸‹è½½çš„ JAR æ–‡ä»¶
7. ç‚¹å‡» "Next" å®Œæˆå®‰è£…

## ä½¿ç”¨æ–¹æ³•

æ’ä»¶å®‰è£…åä¼šè‡ªåŠ¨å·¥ä½œï¼Œæ— éœ€é¢å¤–é…ç½®ï¼š

1. æ’ä»¶ä¼šè‡ªåŠ¨å¤„ç†é€šè¿‡ Burp Suite çš„æ‰€æœ‰ HTTP è¯·æ±‚å’Œå“åº”
2. å½“æ£€æµ‹åˆ°å¤šä½™ç©ºè¡Œæ—¶ï¼Œä¼šåœ¨ "Extensions" -> "Output" é¢æ¿ä¸­æ˜¾ç¤ºå¤„ç†æ—¥å¿—
3. å¤„ç†åçš„æ¶ˆæ¯ä¼šè‡ªåŠ¨ç»§ç»­æ­£å¸¸çš„ HTTP æµç¨‹

## å¤„ç†ç¤ºä¾‹

### å¤„ç†å‰çš„ HTTP è¯·æ±‚ï¼š
```http
GET /api/data HTTP/1.1
Host: example.com
Content-Type: application/json




{"key": "value"}
```

### å¤„ç†åçš„ HTTP è¯·æ±‚ï¼š
```http
GET /api/data HTTP/1.1
Host: example.com
Content-Type: application/json

{"key": "value"}
```

## å¼€å‘å’Œæ„å»º

### ç¯å¢ƒè¦æ±‚
- Java 17 æˆ–æ›´é«˜ç‰ˆæœ¬
- Maven 3.6 æˆ–æ›´é«˜ç‰ˆæœ¬

### æ„å»ºæ­¥éª¤
```bash
# å…‹éš†æˆ–ä¸‹è½½é¡¹ç›®ä»£ç 
cd RemoveExtraBlankLines

# ç¼–è¯‘é¡¹ç›®
mvn clean compile

# æ‰“åŒ…ä¸º JAR æ–‡ä»¶
mvn package
```

### é¡¹ç›®ç»“æ„
```
RemoveExtraBlankLines/
â”œâ”€â”€ src/main/java/oxff/org/
â”‚   â”œâ”€â”€ RemoveExtraBlankLinesExtension.java    # ä¸»æ’ä»¶ç±»
â”‚   â”œâ”€â”€ handler/
â”‚   â”‚   â””â”€â”€ HttpMessageHandler.java           # HTTP æ¶ˆæ¯å¤„ç†å™¨
â”‚   â”œâ”€â”€ processor/
â”‚   â”‚   â””â”€â”€ MessageProcessor.java             # æ¶ˆæ¯å¤„ç†å™¨
â”‚   â””â”€â”€ util/
â”‚       â”œâ”€â”€ ContentAnalyzer.java              # å†…å®¹åˆ†æå™¨
â”‚       â””â”€â”€ HttpMessageCleaner.java           # æ¶ˆæ¯æ¸…ç†å™¨
â”œâ”€â”€ pom.xml
â”œâ”€â”€ README.md
â”œâ”€â”€ TEST_CASES.md                             # è¯¦ç»†æµ‹è¯•ç”¨ä¾‹æ–‡æ¡£
â””â”€â”€ target/
    â””â”€â”€ RemoveExtraBlankLines-1.0-SNAPSHOT.jar
```

## æ³¨æ„äº‹é¡¹

- è¯¥æ’ä»¶åªå¤„ç†æ ‡å‡†çš„ HTTP åè®®æ¶ˆæ¯
- æ’ä»¶ä¼šä¿æŒ HTTP åè®®çš„å®Œæ•´æ€§ï¼Œåªç§»é™¤å¤šä½™çš„ç©ºè¡Œ
- å‡ºç°ä»»ä½•é”™è¯¯æ—¶ï¼Œæ’ä»¶ä¼šè¿”å›åŸå§‹æ¶ˆæ¯ä»¥ç¡®ä¿å®‰å…¨æ€§
- æ’ä»¶çš„å¤„ç†è¿‡ç¨‹ä¸ä¼šå½±å“ Burp Suite çš„å…¶ä»–åŠŸèƒ½

## å…¼å®¹æ€§

- **Burp Suite Community Edition**ï¼šå®Œå…¨æ”¯æŒ
- **Burp Suite Professional**ï¼šå®Œå…¨æ”¯æŒ
- **Montoya API**ï¼š2023.12.1 åŠæ›´é«˜ç‰ˆæœ¬

## è‡ªåŠ¨åŒ–å‘ç‰ˆ

æœ¬é¡¹ç›®é…ç½®äº† GitHub Actions è‡ªåŠ¨åŒ–å‘ç‰ˆæµç¨‹ï¼š

### ğŸš€ å‘å¸ƒæ–°ç‰ˆæœ¬

1. **æœ¬åœ°æµ‹è¯•æ„å»º** (æ¨è)ï¼š
   ```bash
   # Windows ç”¨æˆ·
   test-build.bat
   
   # Linux/Mac ç”¨æˆ·
   ./test-build.sh
   ```

2. **åˆ›å»ºå¹¶æ¨é€ç‰ˆæœ¬æ ‡ç­¾**ï¼š
   ```bash
   git tag v1.0.0
   git push origin v1.0.0
   ```

3. **è‡ªåŠ¨åŒ–æµç¨‹**ï¼š
   - è‡ªåŠ¨ç¼–è¯‘å’Œæ‰“åŒ…é¡¹ç›®
   - ç”Ÿæˆè¯¦ç»†çš„å‘å¸ƒè¯´æ˜
   - åˆ›å»º GitHub Release
   - ä¸Šä¼  JAR æ–‡ä»¶åˆ° Release

### ğŸ“‹ ç‰ˆæœ¬æ ‡ç­¾æ ¼å¼

- ä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼š`vä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢ç‰ˆæœ¬`
- ç¤ºä¾‹ï¼š`v1.0.0`ã€`v1.2.3`ã€`v2.0.0-beta1`

### ğŸ”„ æŒç»­é›†æˆ

æ¯æ¬¡æäº¤åˆ° `main` åˆ†æ”¯æ—¶ä¼šè‡ªåŠ¨ï¼š
- éªŒè¯ä»£ç ç¼–è¯‘
- è¿è¡Œå•å…ƒæµ‹è¯•
- ç”Ÿæˆæ„å»ºäº§ç‰©
- ä¸Šä¼ åˆ° GitHub Artifacts

## è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºå¼€æºè®¸å¯è¯å‘å¸ƒï¼Œå¯è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹ã€‚

## ä½œè€…

å¼€å‘è€…ï¼šoxff.org
é¡¹ç›®ç‰ˆæœ¬ï¼š1.0-SNAPSHOT 